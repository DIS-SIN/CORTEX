

#!/bin/bash

if [ $# -lt 1 ]; then
  echo "Usage: ./test_consumers.sh <yggdrasil_host> <topic>"
  exit
fi

if [ $# -lt 2 ]; then
  echo '------------------------------ survey_evalese ------------------------------'
  kafkacat -b $1:9092 -t survey_evalese -C -e
  echo '----------------------------------------------------------------------------'

  echo '------------------------------ survey_template ------------------------------'
  kafkacat -b $1:9092 -t survey_template -C -e
  echo '-------------------------------------------------------------------------'

  echo '------------------------------ survey_response ------------------------------'
  kafkacat -b $1:9092 -t survey_response -C -e
  echo '-----------------------------------------------------------------------------'

  echo '------------------------------ nlp_process ------------------------------'
  kafkacat -b $1:9092 -t nlp_process -C -e
  echo '-------------------------------------------------------------------------'

  echo '------------------------------ survey_metrics ------------------------------'
  kafkacat -b $1:9092 -t survey_metrics -C -e
  echo '----------------------------------------------------------------------------'

else
  echo '------------------------------------------------------------'
  kafkacat -b $1:9092 -t $2 -C -e > data/$2.json
  echo '------------------------------------------------------------'
fi
